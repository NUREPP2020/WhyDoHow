<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
      integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>
<link rel="stylesheet" type="text/css" href="main.css"/>

<script src="https://kit.fontawesome.com/6df34de0e3.js" crossorigin="anonymous"></script>


<header style=" position: sticky; top: 0; width: 100%; z-index: 100;">

    <nav class="navbar navbar-expand-lg navbar-light orange-background">
        <a class="navbar-brand " href="index.php"">
        <img src="img/WhyDoHow.png" alt="лого" class="logo">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="index.php"></a>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto " style="margin-left: 15%;">
                <form class="form-inline my-0 my-lg-0 " >
                    <div class="input-group mb-2 mr-sm-2">
                        <div class="input-group-prepend">
                            <div class="input-group-text form-control-orange searchline-left" ><img src="img/magnifying-glass.png" alt="" style="width: 20px"></div>
                        </div>
                        <input type="text" class="form-control form-control-orange searchline-midle" id="inlineFormInputGroupUsername2"
                               placeholder="Имя пользователя">
                        <div class="input-group-append">
                            <button class="btn btn-outline-secondary form-control-orange searchline-right" type="button" ><img src="img/next.png" alt="" style="width: 20px"></button>
                        </div>
                    </div>
                </form>
            </ul>
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
               data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="border: 2px solid #363533; margin-right: 10%;border-radius: 10px;">
                Категории
            </a>
            <div class="dropdown-menu category-background" aria-labelledby="navbarDropdown">
                <div class="centerDivs">
                    <!--категории-->
                    <a href="registration.php">
                        <div class="item h-100 d-inline-block img-wrap category-img" style=" margin: auto">
                            <img src="img/девушка1.jpg" alt="категория" class="category-img">
                            <p style="bottom: -11px;">регистрация</p>
                        </div>
                    </a>
                    <a href="createpost.php">
                        <div class="item h-100 d-inline-block img-wrap category-img" style=" margin: auto">
                            <img src="img/девушка1.jpg" alt="категория" class="category-img">
                            <p style="bottom: -11px;">создание поста</p>
                        </div>
                    </a><a href="myprofilw.php">
                        <div class="item h-100 d-inline-block img-wrap category-img" style=" margin: auto">
                            <img src="img/девушка1.jpg" alt="категория" class="category-img">
                            <p style="bottom: -11px;">myprofilw</p>
                        </div>
                    </a><a href="myprofile.php">
                        <div class="item h-100 d-inline-block img-wrap category-img" style=" margin: auto">
                            <img src="img/девушка1.jpg" alt="категория" class="category-img">
                            <p style="bottom: -11px;">myprofile</p>
                        </div>
                    </a><a href="#">
                        <div class="item h-100 d-inline-block img-wrap category-img" style=" margin: auto">
                            <img src="img/девушка1.jpg" alt="категория" class="category-img">
                            <p style="bottom: -11px;">текст</p>
                        </div>
                    </a><a href="#">
                        <div class="item h-100 d-inline-block img-wrap category-img" style=" margin: auto">
                            <img src="img/девушка1.jpg" alt="категория" class="category-img">
                            <p style="bottom: -11px;">текст</p>
                        </div>
                    </a><a href="#">
                        <div class="item h-100 d-inline-block img-wrap category-img" style=" margin: auto">
                            <img src="img/девушка1.jpg" alt="категория" class="category-img">
                            <p style="bottom: -11px;">текст</p>
                        </div>
                    </a><a href="#">
                        <div class="item h-100 d-inline-block img-wrap category-img" style=" margin: auto">
                            <img src="img/девушка1.jpg" alt="категория" class="category-img">
                            <p style="bottom: -11px;">текст</p>
                        </div>
                    </a><a href="#">
                        <div class="item h-100 d-inline-block img-wrap category-img" style=" margin: auto">
                            <img src="img/девушка1.jpg" alt="категория" class="category-img">
                            <p style="bottom: -11px;">текст</p>
                        </div>
                    </a><a href="#">
                        <div class="item h-100 d-inline-block img-wrap category-img" style=" margin: auto">
                            <img src="img/девушка1.jpg" alt="категория" class="category-img">
                            <p style="bottom: -11px;">текст</p>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <!--кнопка открытия модального окна-->


        <!--профиль-->
        <?php
        if (!isset($_COOKIE['userId'])) {
            //<a href="registration.php"> или выпадающие окна
            echo "
            
            <button type=\"button\" class=\"btn round-sides dark-background\" data-toggle=\"modal\" data-target=\"#exampleModal\"
                data-whatever=\"@getbootstrap\" style=\"min-width: 100px; padding: 0; padding-left: 10px;border: 0; color: #FEC541\" align=\"right\">гость
            <img src=\"img/user.png\" alt=\"фото\" class=\"rounded-circle img-fluid\" style=\"max-height: 40px\">
        </button>
            ";
        } else {
            //<a href="index.php"> -> кабинет личный
            echo "
            <a href=\"myprofile.php\">
            <div class=\"round-sides dark-background\"
                 style=\"min-width: 100px; padding-left: 10px; color: #FEC541\" align=\"right\">
                {$_COOKIE['userName']}
            <img src = \"img/{$_COOKIE['userImage']}\" alt = \"фото\" class=\"rounded-circle img-fluid\" style = \"max-height: 40px\" >
            </div >
        </a >
            ";
        }
        ?>

    </nav>
</header>
<!-- Button trigger modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog " role="document" style="max-width: 460px">
        <div class="modal-content orange-background">
            <div class="modal-header" style="border: 0">
                <h5 class="modal-title" id="exampleModalLabel">Войти</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!--форма входа-->
                <form action="login.php" method="post" id="registrationform" class="needs-validation">

                    <div class="form-group" style="width: 64%;margin-left: 17%;margin-right: 17%">
                        <input type="text" class="form-control border border-dark form-control-orange" id="email"
                               name="email"
                               placeholder="Email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                               title="Неверный адресс эл. почты" required/>
                    </div>
                    <div class="form-group" style="width: 64%;margin-left: 17%;margin-right: 17%">
                        <input type="password" class="form-control border border-dark form-control-orange"
                               id="password1" name="password1"
                               placeholder="Пароль"
                               pattern="(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[!@#$%^&*]).{8,16}$"
                               title="Неверный формат пароля. Необходимо 1 заглавная, 1 строчная, 1 цифра, 1спец символ, длинна 8-16"
                               required/>
                    </div>
                    <div align="center">
                        <button class="btn  btn-my-dark-color btn-my-dark-size" type="submit" style="max-width: 300px">
                            Войти
                        </button>
                    </div>
                    <div id="status">
                    </div>
                </form>
                <div>
                    <div class="label-or" style="text-align: center; margin:  3% 0 3% 0"> или</div>
                </div>
                <!-- Google Api -->
                <div align="center">
                    <a href="google_button.php">
                        <button class="btn  btn-my-dark-color btn-my-dark-size profile-button-settings"
                                type="button">
                            Sign in
                            <img src="img/seo-and-web.svg" alt="" class="profile-button-settings-image"
                                 style="float: left">
                        </button>
                    </a>
                    <!-- Facebook Api -->
                    <script>

                        function statusChangeCallback(response) {  // Called with the results from FB.getLoginStatus().
                            console.log('statusChangeCallback');
                            console.log(response);                   // The current login status of the person.
                            if (response.status === 'connected') {   // Logged into your webpage and Facebook.
                                testAPI();
                            }
                        }


                        function checkLoginState() {               // Called when a person is finished with the Login Button.
                            FB.getLoginStatus(function (response) {   // See the onlogin handler
                                statusChangeCallback(response);
                            });
                        }


                        window.fbAsyncInit = function () {
                            FB.init({
                                appId: '857050318136434',
                                cookie: true,                     // Enable cookies to allow the server to access the session.
                                xfbml: true,                     // Parse social plugins on this webpage.
                                version: 'v7.0'           // Use this Graph API version for this call.
                            });

                            FB.getLoginStatus(function (response) {   // Called after the JS SDK has been initialized.
                                statusChangeCallback(response);        // Returns the login status.
                            });
                        };


                        (function (d, s, id) {                      // Load the SDK asynchronously
                            var js, fjs = d.getElementsByTagName(s)[0];
                            if (d.getElementById(id)) return;
                            js = d.createElement(s);
                            js.id = id;
                            js.src = "https://connect.facebook.net/en_US/sdk.js";
                            fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));


                        function testAPI() {                      // Testing Graph API after login.  See statusChangeCallback() for when this call is made.
                            console.log('Welcome!  Fetching your information.... ');
                            FB.api('/me', function (response) {
                                console.log('Successful login for: ' + response.name);
                                document.getElementById('status').innerHTML =
                                    'Thanks for logging in, ' + '! <a href=facebook_login.php?name=' + response.name.replace(" ","_") + '&email=' + response.id + '>Войди через фейсбук</a>';
                            });
                        }

                    </script>
                    <div id="fb-root"></div>
                    <script async defer crossorigin="anonymous"
                            src="https://connect.facebook.net/ru_RU/sdk.js#xfbml=1&version=v7.0"></script>
                    <div align="center" style="margin-top: 16px">
                        <fb:login-button class="fb-login-button" scope="public_profile,email"
                                         onlogin="checkLoginState();"
                                         data-size="large" data-layout="default" data-auto-logout-link="false"
                                         data-use-continue-as="false"
                                         data-width="300px">
                        </fb:login-button>
                    </div>
                </div>
            </div>

            <div class="modal-footer" style="float: left; margin-bottom: 2%; border: 0">
                <span style="font-size: 12px">У вас еще нет аккаунта?</span>
                <div class="btn btn-my-dark-color btn-my-dark-size" style="max-height: 32px; max-width: 180px;"><a
                            href="registration.php" style="color: #FEC541">зарегестрироваться </a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal END-->